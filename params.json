{"name":"OPQBox2","tagline":"Second generation open power quality measurement device","body":"Overview\r\n--------\r\n\r\nThe mission of the Open Power Quality project is to design and implement open source hardware, software, and data for low cost, crowd-sourced power quality monitoring, storage, and analysis. For more details, please see our [home page](http://openpowerquality.org).\r\n\r\nThis repository provides the proposed schematics for the second generation Open Power Quality metering device (OPQBox2). \r\n\r\nCurrently, OPQBox2 is in the design stage.  We are circulating the design to solicit feedback and make improvements prior to layout. We greatly appreciate your willingness to provide us with feedback.\r\n\r\nHigh level requirements\r\n-----------------------\r\n\r\nThe design of OPQBox2 is influenced by our experience with the first generation OPQBox.  Design information about our first generation hardware is available at the [OPQBox1 repository](https://github.com/openpowerquality/opqbox1). \r\n\r\nWe performed a [pilot study of our first generation hardware and software](http://openpowerquality.org/technology/g1-pilot-study.html), and one of the results of this study are the following major requirements for OPQBox2:\r\n\r\n  * **Support event recording upon power cutout.** OPQBox2 adds an 8k of ferromagnetic RAM(FRAM) IC.  Fram will be used as a circular buffer, containing 0.5s of high resolution voltage measurements. Fram will maintain its state through a power cycle, which will be sent to the cloud once the power-grid comes back online.\r\n \r\n  * **Satisfy IEEE PQ standards.**  This includes 256 samples per waveform and locking to 60Hz input.\r\n  \r\n  * **Improve data quality through removal of the voltage sensing transformer.** Using a transformer for voltage measurements makes the device hard to calibrate. Furthermore we found that wall-wart transformers distort the line voltage.\r\n  \r\nSummary of component changes\r\n----------------------------\r\n\r\nHere is a summary of component changes proposed for OPQBox2:\r\n\r\n \r\n                | OPQBox1 | OPQBox2\r\n--------------- | ------- | -------\r\n**Power**       |         | \r\n                | 12V transformer for isolated voltage sensing | Resistor Divider for direct voltage sensing \r\n                | 40-10V DC for power | Isolated 5V DC-DC,  Unisolated capacitive PSU\r\n**Measurement** |         |\r\n                | 4KSPS 16Bit ADC | 50 KSPS 14/16Bit ADC\r\n                | Raspberry Pi for processing/WiFi | Raspberry PI for WiFi only\r\n                |         | 72Mhz Arm+FPU\r\n                |         | PI can be replaced with CAN/RF/Ethernet/GSM module\r\n\r\n\r\nCapacitive PSU design\r\n---------------------\r\n\r\n![capacitive PSU](https://raw.githubusercontent.com/openpowerquality/opqbox2/master/images/capacitive-psu.png)\r\n\r\nDesign notes:\r\n\r\n  * Input is fused and protected by a varistor. \r\n  * R25 for bleeding C1 and suppressing spikes.\r\n  * 12mA output, we are driving it at 10mA through a regulator to the isolation amplifier (see below).\r\n\r\nMeasurement isolation design\r\n----------------------------\r\n\r\n![capacitive PSU](https://raw.githubusercontent.com/openpowerquality/opqbox2/master/images/measurement-isolation.png)\r\n\r\nDesign notes:\r\n\r\n  * Measurement is isolated via TI [amc1100](http://www.ti.com/product/amc1100) isolation amplifier.\r\n  * Resistor divider for voltage measurement.\r\n  * Shielded resistors for divider.\r\n\r\nSafety\r\n------\r\n\r\nWe have domain knowledge in measurement/DSP, but not PSU design and consumer products. From a safety perspective, we have implemented the following:\r\n\r\n  * Isolated PSU for measurements and communications.\r\n  * EMI, fuse, component rating... etc.\r\n  * Isolation for measurement.\r\n  * Capacitive power supply, according to Microchip [AN954](http://ww1.microchip.com/downloads/en/AppNotes/00954A.pdf).\r\n\r\nAdditional design documents\r\n---------------------------\r\n\r\n \r\n  * [OPQBOX2 pdf schematic](https://github.com/openpowerquality/opqbox2/blob/master/Schematics/opq2.pdf)\r\n  * [Bill of Materials](https://raw.githubusercontent.com/openpowerquality/opqbox2/master/Schematics/BOM.txt)\r\n  * [Mentor graphics PADS schematic of OPQBOX2](https://github.com/openpowerquality/opqbox2/blob/master/Schematics/opq2.sch)\r\n  * [PADS library](https://github.com/openpowerquality/opqbox2/tree/master/Schematics/Library)\r\n  \r\n\r\n\r\nSummary of questions for review\r\n-------------------------------\r\n\r\nHere are the issues we are most concerned about.\r\n\r\n  * Do you have any recommendations to improve safety?\r\n  * Do you have any recommendations to improve measurement accuracy, precision, or reliability?\r\n  * Do you have any recommendations should we decide to pursue UL certification?\r\n  * Is there a way to shield the measurements circuit (such as adding a shielding can or PCB moat)? Is it worth the trouble?\r\n  \r\nIf you would like to meet in person or via teleconference to discuss this design, we would be happy to arrange that. If you can reply with comments to johnson@hawaii.edu, that would be great. \r\n\r\nThanks so much for your time!  \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}